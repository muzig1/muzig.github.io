<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://muzig.github.io/atom.xml" rel="self"/>
  
  <link href="http://muzig.github.io/"/>
  <updated>2021-04-11T13:50:29.177Z</updated>
  <id>http://muzig.github.io/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mac åŒæ­¥æ–‡ä»¶åˆ° Linux</title>
    <link href="http://muzig.github.io/2021/03/21/scp/"/>
    <id>http://muzig.github.io/2021/03/21/scp/</id>
    <published>2021-03-21T18:48:48.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>scp â€“ secure copy (remote file copy program)</p><a id="more"></a><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><ol><li>Mac ä¸Šä¼ æ–‡ä»¶åˆ°Linux</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp + æ–‡ä»¶è·¯å¾„ + ç”¨æˆ·å@æœåŠ¡å™¨åœ°å€:ç›®æ ‡è·¯å¾„</span></span><br><span class="line">scp tmp.md root@192.168.0.1:/root/</span><br></pre></td></tr></table></figure><p>2ã€Linux ä¸‹è½½æ–‡ä»¶åˆ° Mac</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scp ç”¨æˆ·å@æœåŠ¡å™¨åœ°å€:ç›®æ ‡è·¯å¾„ ä¸‹è½½è·¯å¾„</span></span><br><span class="line">scp root@192.168.0.1:/root/tmp.md ~/Desktop/</span><br></pre></td></tr></table></figure><h2 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h2><ul><li>-r: Recursively copy entire directories.  Note that scp follows symbolic links encountered in the tree traversal.</li><li>-P(port): Specifies the port to connect to on the remote host.</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;scp â€“ secure copy (remote file copy program)&lt;/p&gt;</summary>
    
    
    
    <category term="Mac" scheme="http://muzig.github.io/categories/Mac/"/>
    
    
    <category term="scp" scheme="http://muzig.github.io/tags/scp/"/>
    
  </entry>
  
  <entry>
    <title>Git é—®é¢˜æ”¶é›†</title>
    <link href="http://muzig.github.io/2021/02/17/git/"/>
    <id>http://muzig.github.io/2021/02/17/git/</id>
    <published>2021-02-17T11:06:42.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>æ”¶é›†ä¸€äº›ä¸å¸¸è§å…³äº git çš„ä¸€äº›é—®é¢˜, ä»¥åŠå¤„ç†åŠæ³•.</p><a id="more"></a><ul><li><a href="#push">push</a></li><li><a href="#clone">clone</a><ul><li><a href="#--depth">â€“depth</a></li></ul></li></ul><h2 id="push"><a href="#push" class="headerlink" title="push"></a>push</h2><p>æŠ¥é”™ä¿¡æ¯: åˆ‡æ¢å¤šä¸ªgithubè´¦å·çš„æ—¶å€™, ä¼šæœ‰æƒé™å†²çª.</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remote: Permission to &lt;user-a&gt;.git denied to &lt;user-b&gt;</span><br><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/ xxxxx.git/&#x27;</span>: &gt; The requested URL returned error: 403</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ¡ˆ:</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config credential.username &lt;user-a&gt;</span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><h2 id="clone"><a href="#clone" class="headerlink" title="clone"></a>clone</h2><h3 id="â€“depth"><a href="#â€“depth" class="headerlink" title="â€“depth"></a>â€“depth</h3><blockquote><p>æŠ¥é”™ä¿¡æ¯:</p></blockquote><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! [remote rejected] main -&gt; main (shallow update not allowed)</span><br></pre></td></tr></table></figure><blockquote><p>åŸå› : </p></blockquote><p>æœ€åˆå…‹éš†ä»“åº“é‡‡ç”¨çš„ â€“depth å‚æ•°, ç„¶åä¿®æ”¹ remote é‡æ–°æ¨é€æ–°ä»“åº“.</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµ…å…‹éš†</span></span><br><span class="line">git <span class="built_in">clone</span> --depth=1 &lt;ä»“åº“åœ°å€&gt;</span><br><span class="line"><span class="comment"># ä¿®æ”¹remote</span></span><br><span class="line">git remote remove origin</span><br><span class="line">git remote add origin &lt;æ–°ä»“åº“åœ°å€&gt;</span><br><span class="line"><span class="comment"># æ¨é€</span></span><br><span class="line">git push -u origin &lt;xxx&gt; <span class="comment"># è¿™ä¸ªæ­¥éª¤å°±ä¼šå‘ç”ŸæŠ¥é”™</span></span><br></pre></td></tr></table></figure><blockquote><p>è§£å†³åŠæ³•:</p></blockquote><p>ç®€å•ç²—æš´:</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…ç†è®°å½•</span></span><br><span class="line">rm -rf .git</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°æ„å»ºä»“åº“</span></span><br><span class="line">git init</span><br><span class="line">git remote add origin &lt;æ–°ä»“åº“åœ°å€&gt;</span><br><span class="line">git push -u origin &lt;xxx&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ”¶é›†ä¸€äº›ä¸å¸¸è§å…³äº git çš„ä¸€äº›é—®é¢˜, ä»¥åŠå¤„ç†åŠæ³•.&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥å…·" scheme="http://muzig.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="git" scheme="http://muzig.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>My Mac</title>
    <link href="http://muzig.github.io/2021/02/03/oh-my-mac/"/>
    <id>http://muzig.github.io/2021/02/03/oh-my-mac/</id>
    <published>2021-02-03T23:38:39.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>æ•´ç†ä»0åˆ°1ä½¿ç”¨Macç³»ç»Ÿ, æé«˜ç”Ÿäº§åŠ›ç¬¬ä¸€æ­¥, å­¦ä¼šè‰¯å¥½çš„ä½¿ç”¨å·¥å…·.</p><a id="more"></a><p>ä»Šå¤©ç”±äºç”µæ± é—®é¢˜, æ¢äº†ä¸€æ³¢ç”µè„‘, big surç³»ç»Ÿ, ä¹‹å‰æ‰“ç®—å‡çº§æ¥ç€ä¸€ç›´æ€•æœ‰å…¼å®¹æ€§é—®é¢˜, ä¸è¿‡ä»Šå¤©å®é™…ä½“éªŒäº†ä¸‹, ç›®å‰æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜, è¿™é‡Œé¡ºå¸¦å†™ä¸€äº›è£…ç”µè„‘ç»†èŠ‚, ä¾¿äºå¿«é€Ÿæ•´ç†æ¢å¤ç³»ç»Ÿç»†èŠ‚.</p><ul><li><a href="#todo">TODO</a></li><li><a href="#terminal">Terminal</a><ul><li><a href="#homebrew">Homebrew</a></li><li><a href="#iterm2">iTerm2</a></li><li><a href="#zsh">zsh</a></li></ul></li><li><a href="#%E8%BD%AF%E4%BB%B6%E7%AF%87">è½¯ä»¶ç¯‡</a><ul><li><a href="#%E5%BF%85%E5%A4%87">å¿…å¤‡</a></li><li><a href="#%E5%B7%A5%E5%85%B7">å·¥å…·</a></li><li><a href="#%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91">ç¨‹åºå¼€å‘</a></li></ul></li><li><a href="#%E5%85%B6%E4%BB%96%E7%BB%86%E8%8A%82">å…¶ä»–ç»†èŠ‚</a><ul><li><a href="#iterm2-1">iTerm2</a></li><li><a href="#goland">Goland</a></li><li><a href="#tmux">Tmux</a></li><li><a href="#oh-my-zsh">oh-my-zsh</a></li></ul></li><li><a href="#%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">å‹æƒ…é“¾æ¥</a></li></ul><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul><li><input checked disabled type="checkbox"> Terminal</li><li><input checked disabled type="checkbox"> è½¯ä»¶ç¯‡</li><li><input checked disabled type="checkbox"> å…¶ä»–ç»†èŠ‚</li></ul><h2 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h2><h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a><a href="https://muzig.github.io/2021/01/30/tmux/">Homebrew</a></h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="iTerm2"><a href="#iTerm2" class="headerlink" title="iTerm2"></a>iTerm2</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask iterm2</span><br></pre></td></tr></table></figure><h3 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h3><ul><li>å®‰è£…</li></ul><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install zsh &amp;&amp; chsh -s usr/<span class="built_in">local</span>/bin/zsh</span><br></pre></td></tr></table></figure><ul><li>æ’ä»¶</li></ul><p><a href="https://github.com/ohmyzsh/ohmyzsh">ohmyzsh</a></p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">brew install autojump</span><br><span class="line">brew install fzf</span><br><span class="line"></span><br><span class="line">brew install git</span><br><span class="line">brew install git-lfs</span><br><span class="line"></span><br><span class="line">brew install tmux</span><br><span class="line"></span><br><span class="line">brew install vim</span><br><span class="line"></span><br><span class="line">brew install wget</span><br><span class="line">brew install telnet</span><br><span class="line">brew install rlwrap</span><br></pre></td></tr></table></figure><h2 id="è½¯ä»¶ç¯‡"><a href="#è½¯ä»¶ç¯‡" class="headerlink" title="è½¯ä»¶ç¯‡"></a>è½¯ä»¶ç¯‡</h2><h3 id="å¿…å¤‡"><a href="#å¿…å¤‡" class="headerlink" title="å¿…å¤‡"></a>å¿…å¤‡</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask google-chrome</span><br><span class="line">brew install --cask dingtalk</span><br><span class="line">brew install --cask wechat</span><br><span class="line">brew install --cask qq</span><br><span class="line">brew install --cask sogouinput</span><br><span class="line">brew install --cask neteasemusic</span><br></pre></td></tr></table></figure><ul><li><a href="https://www.yinxiang.com/">å°è±¡ç¬”è®°</a></li></ul><h3 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask appcleaner</span><br><span class="line">brew install --cask [dozer](https://github.com/Mortennn/Dozer)</span><br><span class="line">brew install --cask snipaste</span><br><span class="line">brew install --cask tencent-lemon</span><br></pre></td></tr></table></figure><h3 id="ç¨‹åºå¼€å‘"><a href="#ç¨‹åºå¼€å‘" class="headerlink" title="ç¨‹åºå¼€å‘"></a>ç¨‹åºå¼€å‘</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install --cask goland</span><br><span class="line">brew install --cask docker</span><br><span class="line">brew install --cask postman</span><br><span class="line">brew install --cask robo-3t</span><br><span class="line">brew install --cask visual-studio-code</span><br><span class="line">brew install --cask unity-hub</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–ç»†èŠ‚"><a href="#å…¶ä»–ç»†èŠ‚" class="headerlink" title="å…¶ä»–ç»†èŠ‚"></a>å…¶ä»–ç»†èŠ‚</h2><h3 id="iTerm2-1"><a href="#iTerm2-1" class="headerlink" title="iTerm2"></a>iTerm2</h3><blockquote><p>Alt + b / f æ— æ³•ä½¿ç”¨é—®é¢˜</p></blockquote><p><img src="/../img/altfb.png" alt="è§£å†³æ–¹æ¡ˆ"></p><h3 id="Goland"><a href="#Goland" class="headerlink" title="Goland"></a>Goland</h3><blockquote><p>ideaVimå¿«æ·é”®å†²çª, æˆ–è€…ä¸ç”Ÿæ•ˆçš„ä¿®æ”¹.</p></blockquote><p><img src="/../img/goland-setting.png" alt="1"><br><img src="/../img/goland-setting2.png" alt="2"></p><h3 id="Tmux"><a href="#Tmux" class="headerlink" title="Tmux"></a><a href="https://muzig.github.io/2021/01/30/tmux/">Tmux</a></h3><h3 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh-my-zsh"></a>oh-my-zsh</h3><blockquote><p><a href="https://github.com/wting/autojump">autojump</a></p></blockquote><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install autojump</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestion</a></p></blockquote><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://github.com/zsh-users/zsh-autosuggestions <span class="variable">$ZSH_CUSTOM</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure><blockquote><p><a href>zsh-syntax-highlighting</a></p></blockquote><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Which plugins would you like to load?</span></span><br><span class="line"><span class="comment"># Standard plugins can be found in $ZSH/plugins/</span></span><br><span class="line"><span class="comment"># Custom plugins may be added to $ZSH_CUSTOM/plugins/</span></span><br><span class="line"><span class="comment"># Example format: plugins=(rails git textmate ruby lighthouse)</span></span><br><span class="line"><span class="comment"># Add wisely, as too many plugins slow down shell startup.</span></span><br><span class="line">plugins=(</span><br><span class="line">git</span><br><span class="line">git-flow</span><br><span class="line">git-auto-fetch</span><br><span class="line">git-lfs</span><br><span class="line">git-prompt</span><br><span class="line">github</span><br><span class="line"></span><br><span class="line">vscode</span><br><span class="line"></span><br><span class="line">tmux</span><br><span class="line">timer</span><br><span class="line">golang</span><br><span class="line">fzf</span><br><span class="line"></span><br><span class="line">autojump</span><br><span class="line">zsh-syntax-highlighting</span><br><span class="line">zsh-autosuggestions</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br><span class="line"><span class="built_in">source</span> ~/.gvm/scripts/gvm</span><br><span class="line"></span><br><span class="line"><span class="comment"># User configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># export golang</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/go/go1.13/bin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/go/bin</span><br></pre></td></tr></table></figure><h2 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h2><ul><li><a href="https://www.zrahh.com/archives/167.html">å·¦å²¸åšå®¢ - zshæ’ä»¶æ¨è</a></li><li><a href="https://blog.csdn.net/fungleo/article/details/78055808">FungLeo - mac ä¸‹ä½¿ç”¨ iTerm ç»ˆç«¯å·¥å…·æ— æ³•ä½¿ç”¨ alt+b å’Œ alt+f å¿«æ·é”®çš„è§£å†³æ–¹æ³•</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æ•´ç†ä»0åˆ°1ä½¿ç”¨Macç³»ç»Ÿ, æé«˜ç”Ÿäº§åŠ›ç¬¬ä¸€æ­¥, å­¦ä¼šè‰¯å¥½çš„ä½¿ç”¨å·¥å…·.&lt;/p&gt;</summary>
    
    
    
    <category term="Mac" scheme="http://muzig.github.io/categories/Mac/"/>
    
    
    <category term="mac" scheme="http://muzig.github.io/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>tmux å¿«é€ŸæŒ‡åŒ—</title>
    <link href="http://muzig.github.io/2021/01/30/tmux/"/>
    <id>http://muzig.github.io/2021/01/30/tmux/</id>
    <published>2021-01-30T09:52:48.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœæ‚¨ç”¨è¿‡screençš„è¯, ç›¸æ¯”çŸ¥é“å®ƒçš„å¥½å¤„, è¿™é‡Œè®°å½•ä¸€æ¬¾ç±»ä¼¼çš„å·¥å…·tmux.</p><a id="more"></a><ul><li><a href="#todo">TODO</a></li><li><a href="#-%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA">ğŸš€ å¿«é€Ÿæ­å»º</a></li><li><a href="#%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE">å¸¸ç”¨å¿«æ·é”®</a></li><li><a href="#%E6%8F%92%E4%BB%B6">æ’ä»¶</a><ul><li><a href="#oh-my-tmux">oh-my-tmux</a></li><li><a href="#tmux-resurrect">tmux-resurrect</a></li></ul></li><li><a href="#%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">å‹æƒ…é“¾æ¥</a></li></ul><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul><li><input disabled type="checkbox"> å¸¸ç”¨å¿«æ·é”®</li></ul><h2 id="ğŸš€-å¿«é€Ÿæ­å»º"><a href="#ğŸš€-å¿«é€Ÿæ­å»º" class="headerlink" title="ğŸš€ å¿«é€Ÿæ­å»º"></a>ğŸš€ å¿«é€Ÿæ­å»º</h2><ul><li>Install Tmux:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac</span></span><br><span class="line">brew install tmux</span><br><span class="line"></span><br><span class="line"><span class="comment"># linux - RedHat</span></span><br><span class="line">yum install tmux</span><br><span class="line"></span><br><span class="line"><span class="comment"># linux - Debian</span></span><br><span class="line">apt install tmux</span><br></pre></td></tr></table></figure><ul><li>Clone TPM:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm</span><br></pre></td></tr></table></figure><ul><li>Put this at the bottom of ~/.tmux.conf ($XDG_CONFIG_HOME/tmux/tmux.conf works too):</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨èé…ç½®</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/gpakosz/.tmux.git ~/.tmux/oh-my-tmux/</span><br><span class="line">cp ~/.tmux/oh-my-tmux/.tmux.conf ~/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰é…ç½®</span></span><br><span class="line">wget https://github.com/muzig/oh-my-mac/blob/main/tmux/.tmux.conf ~/.tmux.conf.local</span><br></pre></td></tr></table></figure><ul><li>Reload TMUX environment so TPM is sourced:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># type this in terminal if tmux is already running</span></span><br><span class="line">$ tmux <span class="built_in">source</span> ~/.tmux.conf</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨å¿«æ·é”®"><a href="#å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="å¸¸ç”¨å¿«æ·é”®"></a>å¸¸ç”¨å¿«æ·é”®</h2><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><h3 id="oh-my-tmux"><a href="#oh-my-tmux" class="headerlink" title="oh-my-tmux"></a>oh-my-tmux</h3><p>ä½œç”¨: é€šç”¨tmuxé…ç½®æ­é…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/gpakosz/.tmux.git</span><br><span class="line">ln -s -f .tmux/.tmux.conf</span><br><span class="line">cp .tmux/.tmux.conf.local .</span><br></pre></td></tr></table></figure><h3 id="tmux-resurrect"><a href="#tmux-resurrect" class="headerlink" title="tmux-resurrect"></a>tmux-resurrect</h3><p>ä½œç”¨: ä¿å­˜tmuxçš„layout, ä¾¿äºé‡å¯ç”µè„‘å¿«é€Ÿæ¢å¤.</p><ul><li>Add plugin to the list of TPM plugins in .tmux.conf:</li><li>Hit prefix + I to fetch the plugin and source it. You should now be able to use the plugin.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -g @plugin <span class="string">&#x27;tmux-plugins/tmux-resurrect&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h2><ul><li><a href="https://github.com/tmux-plugins/tpm">TPM</a></li><li><a href="https://github.com/gpakosz/.tmux">oh-my-tmux</a></li><li><a href="https://github.com/tmux-plugins/tmux-resurrect">tmux-resurrect</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;å¦‚æœæ‚¨ç”¨è¿‡screençš„è¯, ç›¸æ¯”çŸ¥é“å®ƒçš„å¥½å¤„, è¿™é‡Œè®°å½•ä¸€æ¬¾ç±»ä¼¼çš„å·¥å…·tmux.&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥å…·" scheme="http://muzig.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="tmux" scheme="http://muzig.github.io/tags/tmux/"/>
    
  </entry>
  
  <entry>
    <title>vue.js çºªå½•ç‰‡</title>
    <link href="http://muzig.github.io/2021/01/29/the-documentary-of-vue/"/>
    <id>http://muzig.github.io/2021/01/29/the-documentary-of-vue/</id>
    <published>2021-01-29T21:19:57.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>å€¼å¾—ä¸€çœ‹. <a href="https://www.youtube.com/watch?v=OrxmtDw4pVI">Click Here</a></p><a id="more"></a><p><img src="/../img/vue01.png" alt="vue.jd"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å€¼å¾—ä¸€çœ‹. &lt;a href=&quot;https://www.youtube.com/watch?v=OrxmtDw4pVI&quot;&gt;Click Here&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="å‰ç«¯" scheme="http://muzig.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="vue.js" scheme="http://muzig.github.io/tags/vue-js/"/>
    
  </entry>
  
  <entry>
    <title>raspberryPi å…¥é—¨</title>
    <link href="http://muzig.github.io/2021/01/23/raspberryPi-note/"/>
    <id>http://muzig.github.io/2021/01/23/raspberryPi-note/</id>
    <published>2021-01-23T21:54:28.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰åœ¨å‚¨å¤‡å‰ç«¯æŠ€æœ¯, ç›®å‰ä½¿ç”¨æ ‘è“æ´¾æ¥æ­å»ºå¼€å‘ç¯å¢ƒ, ä¾¿äºæµ‹è¯•.</p><a id="more"></a><ul><li><a href="#todo">TODO</a></li><li><a href="#%E8%B4%AD%E4%B9%B0%E5%BB%BA%E8%AE%AE">è´­ä¹°å»ºè®®</a></li><li><a href="#%E5%88%9D%E6%AC%A1%E4%BD%BF%E7%94%A8">åˆæ¬¡ä½¿ç”¨</a></li><li><a href="#%E5%88%9D%E6%AC%A1%E5%90%AF%E5%8A%A8">åˆæ¬¡å¯åŠ¨</a></li><li><a href="#%E5%BF%85%E4%BC%9A%E5%91%BD%E4%BB%A4">å¿…ä¼šå‘½ä»¤</a></li><li><a href="#%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAlamp%E7%8E%AF%E5%A2%83">å¦‚ä½•æ­å»ºLAMPç¯å¢ƒ</a></li><li><a href="#%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">å¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒ</a></li><li><a href="#%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">å‹æƒ…é“¾æ¥</a></li></ul><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><ul><li><input disabled type="checkbox"> å®Œå–„æ–‡æ¡£</li></ul><h2 id="è´­ä¹°å»ºè®®"><a href="#è´­ä¹°å»ºè®®" class="headerlink" title="è´­ä¹°å»ºè®®"></a>è´­ä¹°å»ºè®®</h2><p>å‡†å¤‡:</p><ol><li>æ ‘è“æ´¾4b</li><li>è®¾å¤‡ç”µæº</li><li>microHDMIè½¬HDMI æˆ– è½¬VGA</li><li>è¯»å¡å™¨</li><li>micro-SDå¡(8G,16G, 32G) ä»»æ„å³å¯</li><li>é”®ç›˜</li><li>æ˜¾ç¤ºå™¨</li></ol><h2 id="åˆæ¬¡ä½¿ç”¨"><a href="#åˆæ¬¡ä½¿ç”¨" class="headerlink" title="åˆæ¬¡ä½¿ç”¨"></a>åˆæ¬¡ä½¿ç”¨</h2><ol><li><a href="https://www.raspberrypi.org/software/operating-systems/#raspberry-pi-os-32-bit">ä¸‹è½½isoé•œåƒ</a></li><li>çƒ§å½•è¿›micro-sd</li><li>å°†micro-sdæ’å…¥æ ‘è“æ´¾(ä¸æ˜¯ç”¨è¯»å¡å™¨æ’å…¥usbæ¥å£, è€Œæ˜¯æœ‰ä¸€ä¸ªä¸“é—¨çš„æ’å…¥micro-sdçš„ä½ç½®)</li><li>ç›´æ¥å¯åŠ¨, å³å¯è¿›å…¥ç•Œé¢</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac çƒ§å½•æ–¹å¼</span></span><br><span class="line"><span class="comment"># åœ¨Mac OSä¸‹SDå¡çš„è®¾å¤‡åä¸€èˆ¬ä¸ºrdisk*ï¼Œå¯ä»¥ç”¨diskutil listå‘½ä»¤æŸ¥çœ‹ã€‚</span></span><br><span class="line"><span class="comment"># åœ¨Linuxä¸‹SDå¡çš„è®¾å¤‡åä¸€èˆ¬ä¸ºsd*ï¼Œå¯ä»¥ç”¨lsblkå‘½ä»¤æŸ¥çœ‹ã€‚</span></span><br><span class="line">sudo dd bs=1m <span class="keyword">if</span>=&lt;ä¸‹è½½çš„é•œåƒ.img&gt; of=/dev/&lt;SDå¡è®¾å¤‡å&gt; conv=sync</span><br><span class="line"><span class="comment"># æŠ¥é”™æé†’: dd: /dev/disk2: Resource busy</span></span><br><span class="line"><span class="comment"># åˆ™æ‰§è¡Œ diskutil umountDisk /dev/disk2</span></span><br></pre></td></tr></table></figure><h2 id="åˆæ¬¡å¯åŠ¨"><a href="#åˆæ¬¡å¯åŠ¨" class="headerlink" title="åˆæ¬¡å¯åŠ¨"></a>åˆæ¬¡å¯åŠ¨</h2><ol><li>è®¾ç½®åŒºåŸŸ, å¼€å¯wifiåŠŸèƒ½</li><li>è¿æ¥wifi</li><li>è®¾ç½®rootå¯†ç </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ç›¸å…³å‚æ•°</span></span><br><span class="line">sudo raspi-config</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®rootå¯†ç </span></span><br><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure><h2 id="å¿…ä¼šå‘½ä»¤"><a href="#å¿…ä¼šå‘½ä»¤" class="headerlink" title="å¿…ä¼šå‘½ä»¤"></a>å¿…ä¼šå‘½ä»¤</h2><h2 id="å¦‚ä½•æ­å»ºLAMPç¯å¢ƒ"><a href="#å¦‚ä½•æ­å»ºLAMPç¯å¢ƒ" class="headerlink" title="å¦‚ä½•æ­å»ºLAMPç¯å¢ƒ"></a>å¦‚ä½•æ­å»ºLAMPç¯å¢ƒ</h2><h2 id="å¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#å¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="å¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒ"></a>å¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒ</h2><h2 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/59027897">å¦‚ä½•ç»™æ ‘è“æ´¾å®‰è£…æ“ä½œç³»ç»Ÿ</a></li><li><a href="https://shumeipai.nxez.com/2020/03/07/raspberry-pi-imager-imaging-utility.html">å¦‚ä½•æ–¹ä¾¿çš„çƒ§å½•é•œåƒ</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¹‹å‰åœ¨å‚¨å¤‡å‰ç«¯æŠ€æœ¯, ç›®å‰ä½¿ç”¨æ ‘è“æ´¾æ¥æ­å»ºå¼€å‘ç¯å¢ƒ, ä¾¿äºæµ‹è¯•.&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥å…·" scheme="http://muzig.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="raspberryPi" scheme="http://muzig.github.io/tags/raspberryPi/"/>
    
  </entry>
  
  <entry>
    <title>Golang Escape Analysis</title>
    <link href="http://muzig.github.io/2020/12/27/golang-escape-analysis/"/>
    <id>http://muzig.github.io/2020/12/27/golang-escape-analysis/</id>
    <published>2020-12-27T14:42:27.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>äº†è§£ Golang è¯­è¨€çš„é€ƒé€¸æœºåˆ¶, æœ‰åŠ©äºåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ç»•å¼€é€ƒé€¸åˆ†æçš„ç¼ºé™·, ä»è€Œç¼–å†™æ›´åŠ é«˜æ•ˆçš„ä»£ç .</p><a id="more"></a><ul><li><a href="#%E5%85%B3%E4%BA%8E%E5%A0%86%E6%A0%88">å…³äºå †æ ˆ</a></li><li><a href="#%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90">é€ƒé€¸åˆ†æ</a><ul><li><a href="#%E5%87%BD%E6%95%B0%E5%8F%98%E9%87%8F">å‡½æ•°å˜é‡</a></li><li><a href="#%E9%97%B4%E6%8E%A5%E8%B5%8B%E5%80%BC">é—´æ¥èµ‹å€¼</a></li><li><a href="#interface">interface</a></li><li><a href="#channel">channel</a></li><li><a href="#%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">å¯å˜å‚æ•°</a></li></ul></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li><li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">å‚è€ƒé“¾æ¥</a></li></ul><p>Go è¯­è¨€è¾ƒä¹‹ C è¯­è¨€ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜åŠ¿å°±æ˜¯è‡ªå¸¦ GC åŠŸèƒ½ï¼Œå¯ GC å¹¶ä¸æ˜¯æ²¡æœ‰ä»£ä»·çš„ã€‚å†™ C è¯­è¨€çš„æ—¶å€™ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼Œåœ¨å‡½æ•°é€€å‡ºåä¼šè‡ªåŠ¨é‡Šæ”¾æ‰ï¼Œå› ä¸ºè¿™äº›å˜é‡åˆ†é…åœ¨æ ˆä¸Šã€‚å¦‚æœä½ æƒ³è¦å˜é‡çš„æ•°æ®èƒ½åœ¨å‡½æ•°é€€å‡ºåè¿˜èƒ½è®¿é—®ï¼Œå°±éœ€è¦è°ƒç”¨ malloc æ–¹æ³•åœ¨å †ä¸Šç”³è¯·å†…å­˜ï¼Œå¦‚æœç¨‹åºä¸å†éœ€è¦è¿™å—å†…å­˜äº†ï¼Œå†è°ƒç”¨ free æ–¹æ³•é‡Šæ”¾æ‰ã€‚Go è¯­è¨€ä¸éœ€è¦ä½ ä¸»åŠ¨è°ƒç”¨ malloc æ¥åˆ†é…å †ç©ºé—´ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ†æï¼Œæ‰¾å‡ºéœ€è¦ malloc çš„å˜é‡ï¼Œä½¿ç”¨å †å†…å­˜ã€‚ç¼–è¯‘å™¨çš„è¿™ä¸ªåˆ†æè¿‡ç¨‹å°±å«åšé€ƒé€¸åˆ†æã€‚</p><h2 id="å…³äºå †æ ˆ"><a href="#å…³äºå †æ ˆ" class="headerlink" title="å…³äºå †æ ˆ"></a>å…³äºå †æ ˆ</h2><p>åŒºåˆ«å¦‚ä¸‹:</p><ol><li>ç”³è¯·æ–¹å¼çš„ä¸åŒã€‚æ ˆç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œè€Œå †æ˜¯äººä¸ºç”³è¯·å¼€è¾Ÿ;</li><li>ç”³è¯·å¤§å°çš„ä¸åŒã€‚æ ˆè·å¾—çš„ç©ºé—´è¾ƒå°ï¼Œè€Œå †è·å¾—çš„ç©ºé—´è¾ƒå¤§;</li><li>ç”³è¯·æ•ˆç‡çš„ä¸åŒã€‚æ ˆç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œè€Œå †ä¸€èˆ¬é€Ÿåº¦æ¯”è¾ƒæ…¢;</li><li>å­˜å‚¨å†…å®¹çš„ä¸åŒã€‚æ ˆåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œå‡½æ•°è°ƒç”¨è¯­å¥çš„ä¸‹ä¸€æ¡å¯æ‰§è¡Œè¯­å¥çš„åœ°å€ç¬¬ä¸€ä¸ªè¿›æ ˆï¼Œç„¶åå‡½æ•°çš„å„ä¸ªå‚æ•°è¿›æ ˆï¼Œå…¶ä¸­é™æ€å˜é‡æ˜¯ä¸å…¥æ ˆçš„ã€‚è€Œå †ä¸€èˆ¬æ˜¯åœ¨å¤´éƒ¨ç”¨ä¸€ä¸ªå­—èŠ‚å­˜æ”¾å †çš„å¤§å°ï¼Œå †ä¸­çš„å…·ä½“å†…å®¹æ˜¯äººä¸ºå®‰æ’;</li><li>åº•å±‚ä¸åŒã€‚æ ˆæ˜¯è¿ç»­çš„ç©ºé—´ï¼Œè€Œå †æ˜¯ä¸è¿ç»­çš„ç©ºé—´ã€‚</li></ol><p>è¯¦ç»†ç»†èŠ‚é“¾æ¥:</p><ul><li><a href="https://www.ardanlabs.com/blog/2017/05/language-mechanics-on-stacks-and-pointers.html">Language Mechanics On Stacks And Pointers</a></li><li><a href="https://www.ardanlabs.com/blog/2017/05/language-mechanics-on-escape-analysis.html">Language Mechanics On Escape Analysis</a></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stack</span><span class="params">()</span> <span class="title">int</span></span> &#123; </span><br><span class="line">    <span class="comment">// å˜é‡ i ä¼šåœ¨æ ˆä¸Šåˆ†é…</span></span><br><span class="line">     i := <span class="number">10</span></span><br><span class="line">     <span class="keyword">return</span> i</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">heap</span><span class="params">()</span> *<span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="comment">// å˜é‡ j ä¼šåœ¨å †ä¸Šåˆ†é…</span></span><br><span class="line">    j := <span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> &amp;j</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†ææ±‡ç¼–æŒ‡ä»¤å¦‚ä¸‹:</span></span><br><span class="line">go build --gcflags <span class="string">&#x27;-l&#x27;</span> test.go</span><br><span class="line">go tool objdump ./<span class="built_in">test</span></span><br></pre></td></tr></table></figure><blockquote><p>!!! ä¸è¦ä»¥ä¸ºä½¿ç”¨äº†å †å†…å­˜å°±ä¸€å®šä¼šå¯¼è‡´æ€§èƒ½ä½ä¸‹ï¼Œä½¿ç”¨æ ˆå†…å­˜ä¼šå¸¦æ¥æ€§èƒ½ä¼˜åŠ¿ã€‚å› ä¸ºå®é™…é¡¹ç›®ä¸­ï¼Œç³»ç»Ÿçš„æ€§èƒ½ç“¶é¢ˆä¸€èˆ¬éƒ½ä¸ä¼šå‡ºç°åœ¨å†…å­˜åˆ†é…ä¸Šã€‚åƒä¸‡ä¸è¦ç›²ç›®ä¼˜åŒ–ï¼Œæ‰¾åˆ°ç³»ç»Ÿç“¶é¢ˆï¼Œç”¨æ•°æ®é©±åŠ¨ä¼˜åŒ–ã€‚</p></blockquote><h2 id="é€ƒé€¸åˆ†æ"><a href="#é€ƒé€¸åˆ†æ" class="headerlink" title="é€ƒé€¸åˆ†æ"></a>é€ƒé€¸åˆ†æ</h2><p>éœ€è¦ä½¿ç”¨å †ç©ºé—´åˆ™é€ƒé€¸ï¼Œè¿™æ²¡ä»€ä¹ˆå¯äº‰è®®çš„ã€‚ä½†ç¼–è¯‘å™¨æœ‰æ—¶ä¼šå°†ä¸éœ€è¦ä½¿ç”¨å †ç©ºé—´çš„å˜é‡ï¼Œä¹Ÿé€ƒé€¸æ‰ã€‚è¿™é‡Œæ˜¯å®¹æ˜“å‡ºç°æ€§èƒ½é—®é¢˜çš„å¤§å‘ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šç›¸å…³æ–‡ç« ï¼Œåˆ—ä¸¾äº†ä¸€äº›å¯¼è‡´é€ƒé€¸æƒ…å†µï¼Œå…¶å®æ€»ç»“èµ·æ¥å°±ä¸€å¥è¯ï¼š</p><p><strong>å¤šçº§é—´æ¥èµ‹å€¼å®¹æ˜“å¯¼è‡´é€ƒé€¸ã€‚</strong></p><p>Go è¯­è¨€ä¸­çš„å¼•ç”¨ç±»æ•°æ®ç±»å‹æœ‰ func, interface, slice, map, chan, *Type(æŒ‡é’ˆ)ã€‚</p><p>è®°ä½å…¬å¼ Data.Field = Valueï¼Œå¦‚æœ Data, Field éƒ½æ˜¯å¼•ç”¨ç±»çš„æ•°æ®ç±»å‹ï¼Œåˆ™ä¼šå¯¼è‡´ Value é€ƒé€¸ã€‚è¿™é‡Œçš„ç­‰å· = ä¸å•å•åªèµ‹å€¼ï¼Œä¹Ÿè¡¨ç¤ºå‚æ•°ä¼ é€’ã€‚</p><h3 id="å‡½æ•°å˜é‡"><a href="#å‡½æ•°å˜é‡" class="headerlink" title="å‡½æ•°å˜é‡"></a>å‡½æ•°å˜é‡</h3><blockquote><p>è‹¥å‡½æ•°æ˜¯å˜é‡, ä¸”å‚æ•°ä¹Ÿæ˜¯å¼•ç”¨ç±»å‹, åˆ™ä¼šå‘ç”Ÿé€ƒé€¸</p></blockquote><h3 id="é—´æ¥èµ‹å€¼"><a href="#é—´æ¥èµ‹å€¼" class="headerlink" title="é—´æ¥èµ‹å€¼"></a>é—´æ¥èµ‹å€¼</h3><blockquote><p>è‰¯å¥½çš„å†™æ³•æ˜¯, åœ¨è¿”å›çš„æ—¶å€™å†å¼•ç”¨åœ°å€</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Data <span class="keyword">struct</span> &#123;</span><br><span class="line">    data  <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span></span><br><span class="line">    slice []<span class="keyword">int</span></span><br><span class="line">    ch    <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">    inf   <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">    p     *<span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    d1 := Data&#123;&#125;</span><br><span class="line">    d1.data = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>) <span class="comment">// GOOD: does not escape</span></span><br><span class="line">    d1.slice = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)   <span class="comment">// GOOD: does not escape</span></span><br><span class="line">    d1.ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">4</span>)   <span class="comment">// GOOD: does not escape</span></span><br><span class="line">    d1.inf = <span class="number">3</span>                  <span class="comment">// GOOD: does not escape</span></span><br><span class="line">    d1.p = <span class="built_in">new</span>(<span class="keyword">int</span>)             <span class="comment">//  GOOD: does not escape</span></span><br><span class="line"></span><br><span class="line">    d2 := <span class="built_in">new</span>(Data)             <span class="comment">// d2 æ˜¯æŒ‡é’ˆå˜é‡ï¼Œ ä¸‹é¢ä¸ºè¯¥æŒ‡é’ˆå˜é‡ä¸­çš„æŒ‡é’ˆæˆå‘˜èµ‹å€¼</span></span><br><span class="line">    d2.data = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>) <span class="comment">// BAD: escape to heap</span></span><br><span class="line">    d2.slice = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)   <span class="comment">// BAD:  escape to heap</span></span><br><span class="line">    d2.ch = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">4</span>)   <span class="comment">// BAD:  escape to heap</span></span><br><span class="line">    d2.inf = <span class="number">3</span>                  <span class="comment">// BAD:  escape to heap</span></span><br><span class="line">    d2.p = <span class="built_in">new</span>(<span class="keyword">int</span>)             <span class="comment">// BAD:  escape to heap</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h3><p>åªè¦ä½¿ç”¨äº† Interface ç±»å‹(ä¸æ˜¯ interafce{})ï¼Œé‚£ä¹ˆèµ‹å€¼ç»™å®ƒçš„å˜é‡ä¸€å®šä¼šé€ƒé€¸ã€‚å› ä¸º interfaceVariable.Method() å…ˆæ˜¯é—´æ¥çš„å®šä½åˆ°å®ƒçš„å®é™…å€¼ï¼Œå†è°ƒç”¨å®é™…å€¼çš„åŒåæ–¹æ³•ï¼Œæ‰§è¡Œæ—¶å®é™…å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ã€‚ç›¸å½“äºinterfaceVariable.Method.this = realValue</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Iface <span class="keyword">interface</span> &#123;</span><br><span class="line">    Dummy()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Integer <span class="keyword">int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i Integer)</span> <span class="title">Dummy</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        iface Iface</span><br><span class="line">        i     Integer</span><br><span class="line">    )</span><br><span class="line">    iface = i</span><br><span class="line">    iface.Dummy() <span class="comment">//  make i escape to heap</span></span><br><span class="line">    <span class="comment">// å½¢æˆ iface.Dummy.i = i</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h3><blockquote><p>å‘é€åˆ° channel çš„æ•°æ®ç±»å‹éƒ½å°†é€ƒé€¸</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> (</span><br><span class="line">        chInteger   = <span class="built_in">make</span>(<span class="keyword">chan</span> *<span class="keyword">int</span>)</span><br><span class="line">        chMap       = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span><br><span class="line">        chSlice     = <span class="built_in">make</span>(<span class="keyword">chan</span> []<span class="keyword">int</span>)</span><br><span class="line">        chInterface = <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">        a, b, c, d  = <span class="number">0</span>, <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>&#123;&#125;, []<span class="keyword">int</span>&#123;&#125;, <span class="number">32</span></span><br><span class="line">    )</span><br><span class="line">    chInteger &lt;- &amp;a  <span class="comment">// é€ƒé€¸</span></span><br><span class="line">    chMap &lt;- b       <span class="comment">// é€ƒé€¸</span></span><br><span class="line">    chSlice &lt;- c     <span class="comment">// é€ƒé€¸</span></span><br><span class="line">    chInterface &lt;- d <span class="comment">// é€ƒé€¸</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h3><p>å¯å˜å‚æ•°å¦‚ func(arg â€¦string) å®é™…ä¸ func(arg []string) æ˜¯ä¸€æ ·çš„ï¼Œä¼šå¢åŠ ä¸€å±‚è®¿é—®è·¯å¾„ã€‚è¿™ä¹Ÿæ˜¯ fmt.Sprintf æ€»æ˜¯ä¼šä½¿å‚æ•°é€ƒé€¸çš„åŸå› ã€‚</p><p>ä¾‹å­éå¸¸å¤šï¼Œè¿™é‡Œä¸èƒ½ä¸€ä¸€åˆ—ä¸¾ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½åˆ†ææ–¹æ³•å°±å¥½</p><p>å³ï¼Œ2 çº§æˆ–æ›´å¤šçº§çš„è®¿é—®èµ‹å€¼ä¼šå®¹æ˜“å¯¼è‡´æ•°æ®é€ƒé€¸ã€‚è¿™é‡ŒåŠ ä¸Šå®¹æ˜“äºŒå­—æ˜¯å› ä¸ºéšç€è¯­è¨€çš„å‘å±•ï¼Œç›¸ä¿¡è¿™äº›é—®é¢˜ä¼šè¢«æ…¢æ…¢è§£å†³ï¼Œä½†ç°é˜¶æ®µï¼Œè¿™ä¸ªå¯ä»¥ä½œä¸ºæˆ‘ä»¬åˆ†æé€ƒé€¸ç°è±¡çš„ä¾æ®ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    roles []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *User)</span> <span class="title">SetRoles</span><span class="params">(roles []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    u.roles = roles</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetRoles</span><span class="params">(u User, roles []<span class="keyword">string</span>)</span> <span class="title">User</span></span> &#123;</span><br><span class="line">    u.roles = roles</span><br><span class="line">    <span class="keyword">return</span> u</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    A []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *User)</span> <span class="title">Set</span><span class="params">(a []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">    u.A = a</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetUser</span><span class="params">(user User, a []<span class="keyword">string</span>)</span> <span class="title">User</span></span> &#123;</span><br><span class="line">    user.A = a</span><br><span class="line">    <span class="keyword">return</span> user</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkUser</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">    <span class="comment">// BenchmarkUser-4      39182143            29.0 ns/op</span></span><br><span class="line">    <span class="comment">//u := new(User)</span></span><br><span class="line">    <span class="comment">//for i := 0; i &lt; b.N; i++ &#123;</span></span><br><span class="line">    <span class="comment">//  u.Set([]string&#123;&quot;a&quot;&#125;)</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// BenchmarkUser-4   1000000000         0.585 ns/op</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">        _ = SetUser(User&#123;&#125;, []<span class="keyword">string</span>&#123;<span class="string">&quot;a&quot;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ€§èƒ½ä¼˜åŒ–éƒ½ä¼šä¸ºç¨‹åºå¸¦æ¥ä¸€å®šçš„å¤æ‚åº¦ã€‚<strong>å»ºè®®å®é™…é¡¹ç›®ä¸­è¿˜æ˜¯æ€ä¹ˆæ–¹ä¾¿æ€ä¹ˆå†™ï¼ŒåŠŸèƒ½å®Œæˆåé€šè¿‡æ€§èƒ½åˆ†ææ‰¾åˆ°ç“¶é¢ˆæ‰€åœ¨ï¼Œå†å¯¹å±€éƒ¨è¿›è¡Œä¼˜åŒ–ã€‚</strong></li><li>å¤šçº§é—´æ¥èµ‹å€¼ä¼šå¯¼è‡´ Go ç¼–è¯‘å™¨å‡ºç°ä¸å¿…è¦çš„é€ƒé€¸ï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹å¯èƒ½æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä¸€ä¸‹æ•°æ®ç»“æ„å°±ä¼šä½¿æ€§èƒ½æœ‰å¤§å¹…æå‡ã€‚è¿™ä¹Ÿæ˜¯å¾ˆå¤šäººä¸æ¨èåœ¨ Go ä¸­ä½¿ç”¨æŒ‡é’ˆçš„åŸå› ï¼Œå› ä¸ºå®ƒä¼šå¢åŠ ä¸€çº§è®¿é—®è·¯å¾„ï¼Œè€Œ map, slice, interface{}ç­‰ç±»å‹æ˜¯ä¸å¯é¿å…è¦ç”¨åˆ°çš„ï¼Œä¸ºäº†å‡å°‘ä¸å¿…è¦çš„é€ƒé€¸ï¼Œåªèƒ½æ‹¿æŒ‡é’ˆå¼€åˆ€äº†ã€‚</li></ol><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.jianshu.com/p/518466b4ee96">è¾¾è²æ ¼-Go è¯­è¨€å†…å­˜ç®¡ç†ï¼ˆä¸‰ï¼‰ï¼šé€ƒé€¸åˆ†æ</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;äº†è§£ Golang è¯­è¨€çš„é€ƒé€¸æœºåˆ¶, æœ‰åŠ©äºåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ç»•å¼€é€ƒé€¸åˆ†æçš„ç¼ºé™·, ä»è€Œç¼–å†™æ›´åŠ é«˜æ•ˆçš„ä»£ç .&lt;/p&gt;</summary>
    
    
    
    <category term="åç«¯" scheme="http://muzig.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="golang" scheme="http://muzig.github.io/tags/golang/"/>
    
    <category term="escape-analysis" scheme="http://muzig.github.io/tags/escape-analysis/"/>
    
  </entry>
  
  <entry>
    <title>Golang GC</title>
    <link href="http://muzig.github.io/2020/12/26/golang-GC/"/>
    <id>http://muzig.github.io/2020/12/26/golang-GC/</id>
    <published>2020-12-26T23:32:41.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<ul><li>æ ‡è®°æ¸…é™¤</li><li>å¹¶è¡Œæ ‡è®°æ¸…é™¤</li><li>ä¸‰è‰²æ ‡è®°æ³•</li><li>Hybrid Write Barrier</li></ul><a id="more"></a><ul><li><a href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4--%E5%B9%B6%E8%A1%8C%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4">æ ‡è®°æ¸…é™¤ &amp; å¹¶è¡Œæ ‡è®°æ¸…é™¤</a></li><li><a href="#%E4%B8%89%E8%89%B2%E6%A0%87%E8%AE%B0%E6%B3%95">ä¸‰è‰²æ ‡è®°æ³•</a></li><li><a href="#hybrid-write-barrier-%E6%B7%B7%E5%90%88%E5%86%99%E5%B1%8F%E9%9A%9C">Hybrid Write Barrier (æ··åˆå†™å±éšœ)</a></li><li><a href="#%E4%BD%95%E6%97%B6%E8%A7%A6%E5%8F%91-gc">ä½•æ—¶è§¦å‘ GC</a></li><li><a href="#%E5%85%B6%E4%BB%96%E4%BC%98%E5%8C%96">å…¶ä»–ä¼˜åŒ–</a></li><li><a href="#%E5%B1%95%E6%9C%9B">å±•æœ›</a></li><li><a href="#%E7%BB%93%E8%AE%BA">ç»“è®º</a></li><li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">å‚è€ƒé“¾æ¥</a></li></ul><h2 id="æ ‡è®°æ¸…é™¤-amp-å¹¶è¡Œæ ‡è®°æ¸…é™¤"><a href="#æ ‡è®°æ¸…é™¤-amp-å¹¶è¡Œæ ‡è®°æ¸…é™¤" class="headerlink" title="æ ‡è®°æ¸…é™¤ &amp; å¹¶è¡Œæ ‡è®°æ¸…é™¤"></a>æ ‡è®°æ¸…é™¤ &amp; å¹¶è¡Œæ ‡è®°æ¸…é™¤</h2><p>GC å¼€å§‹ä¹‹å, å¯åŠ¨ STW ç„¶åä» root å¼€å§‹,  root åŒºå€¼å½“å‰æ‰€æœ‰ goroutine çš„æ ˆå’Œå…¨å±€æ•°æ®åŒºçš„å˜é‡(ä¸»è¦æ˜¯è¿™ 2 ä¸ªåœ°æ–¹), å°†èƒ½è¢«è§¦åŠçš„ object æ ‡è®°, å‰©ä¸‹çš„å°±æ˜¯å¯å›æ”¶çš„; æœ€åå†æ¸…ç†æ”¾å› mcache ä¸­, ä»¥å¤‡åç»­ä½¿ç”¨.</p><p>å¹¶è¡Œæ ‡è®°æ¸…é™¤, å®é™…ä¸Šæ˜¯æ¸…ç†è¿‡ç¨‹ä¸éœ€è¦ STW, å‡å°‘äº† STW çš„æ—¶é—´.</p><h2 id="ä¸‰è‰²æ ‡è®°æ³•"><a href="#ä¸‰è‰²æ ‡è®°æ³•" class="headerlink" title="ä¸‰è‰²æ ‡è®°æ³•"></a>ä¸‰è‰²æ ‡è®°æ³•</h2><p><img src="/../img/gc_algorithm.png" alt="gc-algorithm"></p><ol><li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå†™æ“ä½œå°±æ˜¯æ­£å¸¸çš„èµ‹å€¼ã€‚</li><li>GC å¼€å§‹ï¼Œå¼€å¯å†™å±éšœç­‰å‡†å¤‡å·¥ä½œã€‚å¼€å¯å†™å±éšœç­‰å‡†å¤‡å·¥ä½œéœ€è¦çŸ­æš‚çš„ STWã€‚</li><li>Stack scan é˜¶æ®µï¼Œä»å…¨å±€ç©ºé—´å’Œ goroutine æ ˆç©ºé—´ä¸Šæ”¶é›†å˜é‡ã€‚</li><li>Mark é˜¶æ®µï¼Œæ‰§è¡Œä¸Šè¿°çš„ä¸‰è‰²æ ‡è®°æ³•ï¼Œç›´åˆ°æ²¡æœ‰ç°è‰²å¯¹è±¡ã€‚</li><li>Mark termination é˜¶æ®µï¼Œå¼€å¯ STWï¼Œå›å¤´é‡æ–°æ‰«æ root åŒºåŸŸæ–°å˜é‡ï¼Œå¯¹ä»–ä»¬è¿›è¡Œæ ‡è®°ã€‚</li><li>Sweep é˜¶æ®µï¼Œå…³é—­ STW å’Œ å†™å±éšœï¼Œå¯¹ç™½è‰²å¯¹è±¡è¿›è¡Œæ¸…é™¤ã€‚</li></ol><h2 id="Hybrid-Write-Barrier-æ··åˆå†™å±éšœ"><a href="#Hybrid-Write-Barrier-æ··åˆå†™å±éšœ" class="headerlink" title="Hybrid Write Barrier (æ··åˆå†™å±éšœ)"></a>Hybrid Write Barrier (æ··åˆå†™å±éšœ)</h2><p>Go åœ¨ 1.8 ç‰ˆæœ¬å¼•å…¥äº†æ··åˆå†™å±éšœï¼Œå…¶ä¼šåœ¨èµ‹å€¼å‰ï¼Œå¯¹æ—§æ•°æ®ç½®ç°ï¼Œå†è§†æƒ…å†µå¯¹æ–°å€¼è¿›è¡Œç½®ç°ã€‚</p><p><img src="/../img/gc-hyber.png" alt="gc-hybrid"></p><h2 id="ä½•æ—¶è§¦å‘-GC"><a href="#ä½•æ—¶è§¦å‘-GC" class="headerlink" title="ä½•æ—¶è§¦å‘ GC"></a>ä½•æ—¶è§¦å‘ GC</h2><ul><li>å®¹é‡è§¦å‘ - è¾¾åˆ°è®¾ç½®çš„é˜ˆå€¼è§¦å‘ GC, é»˜è®¤ä¸º100(å³å†…å­˜å¢é•¿100%å³è§¦å‘ä¸€æ¬¡), å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ GOGC æˆ–è€… debug.SetGCPercent()</li><li>æ—¶é—´è§¦å‘ - æ¯éš” 2 åˆ†é’Ÿ, è§¦å‘ä¸€æ¬¡ GC</li><li>æ‰‹åŠ¨è§¦å‘ - runtime.GC()</li></ul><h2 id="å…¶ä»–ä¼˜åŒ–"><a href="#å…¶ä»–ä¼˜åŒ–" class="headerlink" title="å…¶ä»–ä¼˜åŒ–"></a>å…¶ä»–ä¼˜åŒ–</h2><ul><li>åªä¼šå ç”¨ 25% çš„ cpu ç®—åŠ›å¤„ç† GC é€»è¾‘, ä¿è¯å‡å°‘å¯¹ç”¨æˆ·çš„å½±å“. è‹¥ä¸‹ä¸€è½® GC è§¦å‘, ä¼šç­‰å¾…ä¸Šä¸€è½®æ‰§è¡Œå®Œæ¯•</li><li>å¯¹äº tiny å¯¹è±¡, ç›´æ¥æ ‡è®°é»‘è‰², æ²¡æœ‰ç°è‰²é˜¶æ®µ, å› ä¸ºä¸å­˜åœ¨å¼•ç”¨å¯¹è±¡</li><li>é‡‡ç”¨å¯¹è±¡æ± çš„æ–¹å¼, å‡å°‘ GC çš„å‹åŠ›, ä½†å®é™…ä¸Šä¹Ÿä¼šå­˜åœ¨æ ‡è®°çš„å‹åŠ›; å¦‚æœå¯ä»¥æ”¾åœ¨æ°¸ä¹…æ ‡è®°, å°±å¯ä»¥å‡å°‘æ ‡è®°å‹åŠ›</li><li>ç›´æ¥ç”³è¯·å¤§å†…å­˜(å¤§äº32k), å¯¹ GC æ¥è¯´æ˜¯ä¸€ä¸ª largespan; éœ€è¦è‡ªè¡Œä»£ç ç®¡ç†</li></ul><h2 id="å±•æœ›"><a href="#å±•æœ›" class="headerlink" title="å±•æœ›"></a>å±•æœ›</h2><ol><li>å¼•å…¥åˆ†ä»£æœºåˆ¶, åƒ JVM é‚£æ ·å†…å­˜åˆ†ä¸º ä¸€çº§/äºŒçº§/æ°¸ä¹…, ä¸åŒçº§åˆ«, é‡‡ç”¨ä¸åŒçš„è®¡ç®—èµ„æº</li></ol><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ol><li>å‡å°‘å±‚çº§æ•° - åµŒå¥—å±‚çº§è¶Šå¤š, å¯¹äº GC çš„å‹åŠ›è¶Šå¤§; å¦‚: chan map[string][]*string</li></ol><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://wudaijun.com/2020/01/go-gc-keypoint-and-monitor/">Golang GCæ ¸å¿ƒè¦ç‚¹å’Œåº¦é‡æ–¹æ³•</a></li><li><a href="https://wudaijun.com/2017/12/gc-study/">å¸¸è§GCç®—æ³•åŠGolang GC</a></li><li><a href="https://www.jianshu.com/p/0083a90a8f7e">è¾¾è²æ ¼-Go è¯­è¨€å†…å­˜ç®¡ç†ï¼ˆå››ï¼‰</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;ul&gt;
&lt;li&gt;æ ‡è®°æ¸…é™¤&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œæ ‡è®°æ¸…é™¤&lt;/li&gt;
&lt;li&gt;ä¸‰è‰²æ ‡è®°æ³•&lt;/li&gt;
&lt;li&gt;Hybrid Write Barrier&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="åç«¯" scheme="http://muzig.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="golang" scheme="http://muzig.github.io/tags/golang/"/>
    
    <category term="gc" scheme="http://muzig.github.io/tags/gc/"/>
    
  </entry>
  
  <entry>
    <title>Golang Scheduling</title>
    <link href="http://muzig.github.io/2020/12/26/golang-scheduling/"/>
    <id>http://muzig.github.io/2020/12/26/golang-scheduling/</id>
    <published>2020-12-26T15:40:47.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>ç†Ÿæ‚‰ Golang çš„è°ƒåº¦åŸç†, èƒ½å¤Ÿå¸®åŠ©ç¼–å†™æ›´åŠ é«˜æ•ˆçš„å¹¶å‘é€»è¾‘; åŒæ—¶è¿˜èƒ½é¿å…è°ƒåº¦ç›¸å…³çš„å‘.</p><a id="more"></a><ul><li><a href="#gpm-%E6%A8%A1%E5%9E%8B">GPM æ¨¡å‹</a></li><li><a href="#%E8%B0%83%E5%BA%A6%E6%B5%81%E7%A8%8B">è°ƒåº¦æµç¨‹</a></li><li><a href="#%E7%94%A8%E6%88%B7%E6%96%B9%E5%BC%8F%E9%98%BB%E5%A1%9E%E5%94%A4%E9%86%92">ç”¨æˆ·æ–¹å¼é˜»å¡/å”¤é†’</a></li><li><a href="#syscall">syscall</a></li><li><a href="#sysmon">sysmon</a></li><li><a href="#%E6%8A%A2%E5%8D%A0%E5%BC%8F%E8%B0%83%E5%BA%A6">æŠ¢å å¼è°ƒåº¦</a></li><li><a href="#netpoll">netpoll</a></li><li><a href="#g-%E7%9A%84%E5%88%9B%E5%BB%BA%E6%B5%81%E7%A8%8B">g çš„åˆ›å»ºæµç¨‹</a></li><li><a href="#g-%E7%9A%84%E6%9A%82%E5%81%9C%E6%96%B9%E5%BC%8F">g çš„æš‚åœæ–¹å¼</a></li><li><a href="#go-%E8%B0%83%E5%BA%A6%E6%9F%A5%E7%9C%8B%E6%96%B9%E5%BC%8F">Go è°ƒåº¦æŸ¥çœ‹æ–¹å¼</a></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li><li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">å‚è€ƒé“¾æ¥</a></li></ul><h2 id="GPM-æ¨¡å‹"><a href="#GPM-æ¨¡å‹" class="headerlink" title="GPM æ¨¡å‹"></a>GPM æ¨¡å‹</h2><p>æ–‡ä»¶ä½ç½®: src/runtime/runtime2.go</p><ul><li>g(goroutine): å¯¹åº”åˆ° g ç»“æ„ä½“, ä¿å­˜ goroutin éœ€è¦çš„å †æ ˆä¿¡æ¯</li><li>p(process):   ç›¸å½“äº g çš„é©±åŠ¨, åªæœ‰ç»‘å®šåœ¨ local runq ä¸‹, æ‰èƒ½è¢«è°ƒåº¦</li><li>m(machine):   OS çº¿ç¨‹æŠ½è±¡, çœŸæ­£çš„é©±åŠ¨åŠ›, å’ŒæŸä¸ª p ç»‘å®š, ç„¶å p ä» local runq ä¸­ä¾æ¬¡å–å‡º g ç”¨æ¥æ‰§è¡Œ</li></ul><p><img src="/../img/go-shechduling.png" alt="go-sheduling"></p><p>è¡¥å……:</p><ol><li>æœ€æ—© go1.1 ä»…ä»…æ˜¯ GM æ¨¡å¼, åç»­ Dmitry Vyukov ä¸ºäº†è§£å†³<strong>å¹¶å‘ä¼¸ç¼©æ€§</strong>é—®é¢˜, å¼•å…¥ p çš„æ¦‚å¿µ <a href="https://github.com/muzig/muzig.github.io/blob/main/source/pdf/Scalable%20Go%20Scheduler%20Design%20Doc.pdf">ææ¡ˆæ–‡æ¡£</a></li><li>g çš„æ•°é‡å—é™äº GOMAXPROCS, å³è¶…çº¿ç¨‹æ•°é‡, ä¸€èˆ¬ intel cpu å…·æœ‰è¶…çº¿ç¨‹æŠ€æœ¯, åŒæ ¸å››çº¿ç¨‹, å³æ•°é‡ä¸º4</li><li>m çš„ä¸ªæ•°æ˜¯ä¸å®šçš„ï¼Œç”±Go Runtimeè°ƒæ•´ï¼Œé»˜è®¤æœ€å¤§é™åˆ¶ä¸º10000ä¸ª</li></ol><h2 id="è°ƒåº¦æµç¨‹"><a href="#è°ƒåº¦æµç¨‹" class="headerlink" title="è°ƒåº¦æµç¨‹"></a>è°ƒåº¦æµç¨‹</h2><ol><li>m ä¸ p ç»‘å®š, m ä» p çš„ local runq ä¸­å–å‡ºå¹¶åˆ‡æ¢åˆ° g çš„å †æ ˆæ‰§è¡Œ<ol><li>è‹¥ local runq å­˜åœ¨ g, åˆ™æ‰§è¡Œ(æ— é”)</li><li>è‹¥ä¸å­˜åœ¨, ä» global runq å–å‡º g æ‰§è¡Œ(æœ‰é”)</li><li>è‹¥ä¾ç„¶ä¸å­˜åœ¨, åˆ™ä»å…¶ä»– p â€œçªƒå–â€ g æ‰§è¡Œ</li></ol></li><li>è‹¥æ²¡æœ‰ g å¯ä»¥æ‰§è¡Œ, åˆ™ m ä¸ p è§£ç»‘, è¿›å…¥ä¼‘çœ æ¨¡å¼(idle)</li></ol><h2 id="ç”¨æˆ·æ–¹å¼é˜»å¡-å”¤é†’"><a href="#ç”¨æˆ·æ–¹å¼é˜»å¡-å”¤é†’" class="headerlink" title="ç”¨æˆ·æ–¹å¼é˜»å¡/å”¤é†’"></a>ç”¨æˆ·æ–¹å¼é˜»å¡/å”¤é†’</h2><p>é˜»å¡:</p><p>å½“ g è¢« channel å¡ä½, m ä¼šè·³è¿‡æ‰§è¡Œä¸‹ä¸€ä¸ª, å¹¶å°† g æ”¾ç½®åœ¨ waitq é‡Œé¢</p><p>å”¤é†’:</p><p>å½“ g æ‰§è¡Œçš„æ—¶å€™, é€šè¿‡ channel å‘å¦ä¸€ä¸ª g2 æŠ•é€’æ¶ˆæ¯, åˆ™ g2 å°†ç›´æ¥â€æ’é˜Ÿâ€, æ”¾ä¸‹ä¸€ä¸ªæ‰§è¡Œ</p><h2 id="syscall"><a href="#syscall" class="headerlink" title="syscall"></a>syscall</h2><p>è‹¥ g è¢«é˜»å¡åœ¨ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ä¸Š, åˆ™ p å°†äº m è§£ç»‘, å¯»æ‰¾ idle çŠ¶æ€çš„ m å†æ­¤ç»‘å®š; è‹¥æ²¡æœ‰ idle çŠ¶æ€çš„ m, åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ m.</p><p>ç³»ç»Ÿè°ƒç”¨ç»“æŸ, g ä¼šé‡æ–°å¯»æ‰¾ idle çŠ¶æ€çš„ p, å¹¶æ¢å¤æ‰§è¡Œ, è‹¥æ²¡æœ‰åˆ™æ”¾åˆ° globl runq ä¸­.</p><p>ç³»ç»Ÿè¢«è°ƒåº¦çš„ä¸¤ä¸ªå…³é”®ç‚¹:</p><ol><li>runtime/syscallåŒ…ä¸­, ç³»ç»Ÿè°ƒç”¨åˆ†ä¸º syscall &amp; rawsyscall, åŒºåˆ«åœ¨äºå‰è€…ä¼šè®°å½•ä¿å­˜å’Œæ¢å¤æ‰€éœ€çŠ¶æ€, è¿™æ ·å¯ä»¥å®‰å…¨çš„è§£ç»‘; æŸäº›ç³»ç»Ÿè°ƒç”¨å¯ä»¥é¢„å…ˆè¯„ä¼°æ˜¯ä¼šé•¿æ—¶é—´é˜»å¡, åˆ™ä¼šå‘èµ·ä¹‹å‰, ç›´æ¥ p &amp; m è§£ç»‘(handoffp)</li><li>sysmon è´Ÿè´£æ£€æŸ¥ç³»ç»Ÿè°ƒç”¨æ—¶é—´, å†³å®šæ˜¯å¦éœ€è¦ handoffp</li></ol><h2 id="sysmon"><a href="#sysmon" class="headerlink" title="sysmon"></a>sysmon</h2><p>sysmon æ˜¯ä¸€ä¸ªç”± runtime å¯åŠ¨çš„Mï¼Œä¹Ÿå«ç›‘æ§çº¿ç¨‹ï¼Œå®ƒæ— éœ€Pä¹Ÿå¯ä»¥è¿è¡Œï¼Œå®ƒæ¯20us~10mså”¤é†’ä¸€æ¬¡.</p><p>æµç¨‹å¦‚ä¸‹:</p><ol><li>é‡Šæ”¾é—²ç½®è¶…è¿‡5åˆ†é’Ÿçš„spanç‰©ç†å†…å­˜ï¼›</li><li>å¦‚æœè¶…è¿‡2åˆ†é’Ÿæ²¡æœ‰åƒåœ¾å›æ”¶ï¼Œå¼ºåˆ¶æ‰§è¡Œï¼›</li><li>å°†é•¿æ—¶é—´æœªå¤„ç†çš„netpollç»“æœæ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼›</li><li>å‘é•¿æ—¶é—´è¿è¡Œçš„Gä»»åŠ¡å‘å‡ºæŠ¢å è°ƒåº¦ï¼›</li><li>æ”¶å›å› syscallé•¿æ—¶é—´é˜»å¡çš„Pï¼›</li></ol><h2 id="æŠ¢å å¼è°ƒåº¦"><a href="#æŠ¢å å¼è°ƒåº¦" class="headerlink" title="æŠ¢å å¼è°ƒåº¦"></a>æŠ¢å å¼è°ƒåº¦</h2><p>å½“æŸä¸ª g æ‰§è¡Œè¶…è¿‡10ms, åˆ™ sysmon å°†å‘èµ·æŠ¢å å¼è¯·æ±‚, ä¼šç»™ g æ‰“ä¸Šæ ‡ç­¾; å½“ g æ‰§è¡Œå‡½æ•°æ—¶(æ›´ç¡®åˆ‡è¯´ï¼Œåœ¨é€šè¿‡newstackåˆ†é…å‡½æ•°æ ˆæ—¶), å°†è¢« runtime.Goched çš„æ–¹å¼æš‚åœ, æ”¾ç½®åœ¨ global runq ä¸­</p><h2 id="netpoll"><a href="#netpoll" class="headerlink" title="netpoll"></a>netpoll</h2><p>é™¤äº†ä¹‹å‰æåˆ°çš„, local runq, runqnext, global runq, è¿˜å­˜åœ¨å¯¹ç½‘ç»œ I/O è¿›è¡Œä¼˜åŒ–çš„ netpoll, æœ¬åœ°é¿å…ç½‘ç»œI/Oçš„æ—¶å€™é™·å…¥ç³»ç»Ÿè°ƒç”¨, ä¸é˜»å¡ M (è€Œæ˜¯é˜»å¡ G ), ä»è€Œä¸ä¼šå¯¼è‡´å¤§é‡çš„ M è¢«åˆ›å»º</p><h2 id="g-çš„åˆ›å»ºæµç¨‹"><a href="#g-çš„åˆ›å»ºæµç¨‹" class="headerlink" title="g çš„åˆ›å»ºæµç¨‹"></a>g çš„åˆ›å»ºæµç¨‹</h2><ol><li>å½“ go func(){} æ‰§è¡Œçš„æ—¶å€™, ä¼šå°è¯•ä»æ± å­ä¸­å¤ç”¨, æ²¡æœ‰åˆ™åˆ›å»º</li><li>å°è¯•â€æ’é˜Ÿâ€, æ”¾ç½®åˆ°å½“å‰ p çš„ runnext é‡Œé¢</li><li>å¦åˆ™æ”¾ç½®åˆ° local runq ä¸­(æ— é”)</li><li>å¦åˆ™æ”¾ç½®åˆ° global runq ä¸­(æœ‰é”)</li></ol><h2 id="g-çš„æš‚åœæ–¹å¼"><a href="#g-çš„æš‚åœæ–¹å¼" class="headerlink" title="g çš„æš‚åœæ–¹å¼"></a>g çš„æš‚åœæ–¹å¼</h2><ul><li>å¸¸è§„æ–¹å¼  - å°† g é˜»å¡, æ”¾åˆ° global runq ä¸­, ç­‰å¾…è¢«è·å–æ‰§è¡Œ</li><li>ç­‰å¾…æ–¹å¼  - å°† g é˜»å¡, æ”¾åˆ° waitq ä¸­, ç­‰å¾…è¢«å…¶ä»– g å”¤é†’</li><li>è‡ªæ—‹æ–¹å¼  - gpm éƒ½ä¸è°ƒåº¦, ç›´åˆ°è¢«å”¤é†’</li><li>é€€å‡ºæ–¹å¼  - ç«‹å³ç»ˆæ­¢ g ä»»åŠ¡, ç¡®ä¿ defer æ­£å¸¸æ‰§è¡Œ</li><li>process æ–¹å¼ - æ”¾é£ p, é˜»å¡ g m, p å¯ä»¥è·Ÿå…¶ä»– m ç»‘å®š</li></ul><h2 id="Go-è°ƒåº¦æŸ¥çœ‹æ–¹å¼"><a href="#Go-è°ƒåº¦æŸ¥çœ‹æ–¹å¼" class="headerlink" title="Go è°ƒåº¦æŸ¥çœ‹æ–¹å¼"></a>Go è°ƒåº¦æŸ¥çœ‹æ–¹å¼</h2><ul><li><a href="https://wudaijun.com/2018/01/go-scheduler/">Go è°ƒåº¦æ¨¡å‹</a></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»è°ƒåº¦æ¨¡å‹, åˆ° gpm çš„æ¢è®¨, è®²åˆ°äº†é˜»å¡å’Œå”¤é†’çš„æµç¨‹, ä»¥åŠå¦‚ä½•æŠ¢å , å»¶ä¼¸åˆ° sysmon æœåŠ¡çš„ç‰¹ç‚¹; æœ€åè¡¥å……äº† netpoll ä¼˜åŒ–å’Œ g çš„åˆ›å»ºæµç¨‹å’ŒçŠ¶æ€ä»‹ç».<br>å›è¿‡å¤´æ¥, æˆ‘ä»¬å†çœ‹çœ‹, å­¦ä¹ è°ƒåº¦çš„ç›®çš„å…¶å®å®é™…éœ€æ±‚æ¥è®², å°±æ˜¯ç¼–å†™æ›´åŠ é«˜æ•ˆçš„å¹¶å‘ç¨‹åº, æ˜ç™½äº†æµç¨‹, è¿˜éœ€è¦å®æˆ˜, åç»­å†æ›´æ–°ä»£ç å®æˆ˜çš„æƒ…å†µ.</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://wudaijun.com/2018/01/go-scheduler/">Go è°ƒåº¦æ¨¡å‹</a></li><li><a href="https://wudaijun.com/2018/11/scheduler-blabla/">å†è°ˆè°ƒåº¦</a></li><li><a href="https://www.jianshu.com/p/db0aea4d60ed">è¾¾è²æ ¼-Go è¯­è¨€è°ƒåº¦ï¼ˆä¸€ï¼‰: ç³»ç»Ÿè°ƒåº¦</a></li><li><a href="https://www.jianshu.com/p/cb6881a2661d">è¾¾è²æ ¼-Go è¯­è¨€è°ƒåº¦ï¼ˆäºŒï¼‰: goroutine è°ƒåº¦å™¨</a></li><li><a href="https://www.jianshu.com/p/ef654413f2c1">è¾¾è²æ ¼-Go è¯­è¨€è°ƒåº¦ï¼ˆä¸‰ï¼‰: å¹¶å‘</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç†Ÿæ‚‰ Golang çš„è°ƒåº¦åŸç†, èƒ½å¤Ÿå¸®åŠ©ç¼–å†™æ›´åŠ é«˜æ•ˆçš„å¹¶å‘é€»è¾‘; åŒæ—¶è¿˜èƒ½é¿å…è°ƒåº¦ç›¸å…³çš„å‘.&lt;/p&gt;</summary>
    
    
    
    <category term="åç«¯" scheme="http://muzig.github.io/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
    <category term="golang" scheme="http://muzig.github.io/tags/golang/"/>
    
    <category term="scheduling" scheme="http://muzig.github.io/tags/scheduling/"/>
    
  </entry>
  
  <entry>
    <title>Shell ç¬”è®°</title>
    <link href="http://muzig.github.io/2020/12/19/shell-note/"/>
    <id>http://muzig.github.io/2020/12/19/shell-note/</id>
    <published>2020-12-19T15:22:53.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨é¡¹ç›®ä¸­å¼€å‘è¿‡ç¨‹ä¸­, éš¾å…ä¼šå¤„ç†ä¸€äº›è„šæœ¬åŒ–çš„ä¸šåŠ¡, ç¼–å†™ shell è„šæœ¬èƒ½å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„å¤„ç†ä¸€äº›å›ºå®šä¸šåŠ¡.</p><p>ç§‘æŠ€æ”¹å˜ç”Ÿæ´», è„šæœ¬é‡Šæ”¾åŒæ‰‹.</p><a id="more"></a><ul><li><a href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95">åŸºç¡€è¯­æ³•</a><ul><li><a href="#%E5%8F%98%E9%87%8F">å˜é‡</a></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2">å­—ç¬¦ä¸²</a></li><li><a href="#%E6%95%B0%E7%BB%84">æ•°ç»„</a></li><li><a href="#%E6%B3%A8%E9%87%8A">æ³¨é‡Š</a></li></ul></li><li><a href="#%E4%BC%A0%E5%8F%82">ä¼ å‚</a></li><li><a href="#%E8%BF%90%E7%AE%97%E7%AC%A6">è¿ç®—ç¬¦</a><ul><li><a href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6">ç®—æ•°è¿ç®—ç¬¦</a></li><li><a href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6">é€»è¾‘è¿ç®—ç¬¦</a></li><li><a href="#%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E7%AC%A6">å¸ƒå°”è¿ç®—ç¬¦</a></li><li><a href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6">å…³ç³»è¿ç®—ç¬¦</a></li><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6">å­—ç¬¦ä¸²è¿ç®—ç¬¦</a></li><li><a href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6">æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦</a></li></ul></li><li><a href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">æµç¨‹æ§åˆ¶</a><ul><li><a href="#%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6">æ¡ä»¶æ§åˆ¶</a></li><li><a href="#%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6">å¾ªç¯æ§åˆ¶</a></li></ul></li><li><a href="#%E5%87%BD%E6%95%B0">å‡½æ•°</a></li><li><a href="#%E9%87%8D%E5%AE%9A%E5%90%91">é‡å®šå‘</a><ul><li><a href="#devnull-%E6%96%87%E4%BB%B6">/dev/null æ–‡ä»¶</a></li></ul></li><li><a href="#%E6%96%87%E4%BB%B6%E5%BC%95%E7%94%A8">æ–‡ä»¶å¼•ç”¨</a></li><li><a href="#oh-my-zsh-%E6%BA%90%E7%A0%81">oh-my-zsh æºç </a></li><li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">å‚è€ƒé“¾æ¥</a></li></ul><h2 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h2><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èµ‹å€¼ç­‰å·ä¸¤è¾¹ä¸èƒ½æ·»åŠ ç©ºæ ¼</span></span><br><span class="line">name=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¸¸é‡</span></span><br><span class="line">name=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">readonly</span> name</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤å˜é‡</span></span><br><span class="line">name=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">unset</span> name</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><ul><li>å•å¼•å·<ul><li>åŸæ ·è¾“å‡º, ä¸æ”¯æŒå˜é‡å¼•ç”¨</li></ul></li><li>åŒå¼•å·<ul><li>æ”¯æŒå˜é‡å¼•ç”¨</li><li>æ”¯æŒè½¬ä¹‰å­—ç¬¦</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line">name=<span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#name&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æå–å­—ç¬¦ä¸²</span></span><br><span class="line">name=<span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:1:3&#125;</span> <span class="comment"># è¾“å‡ºell</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥æ‰¾å­—ç¬¦ä¸²</span></span><br><span class="line">string=<span class="string">&quot;runoob is a great site&quot;</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="string">&quot;<span class="variable">$string</span>&quot;</span> io`  <span class="comment"># è¾“å‡º 4</span></span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array_name=(value1 value2 ... valuen)</span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">v1=<span class="variable">$&#123;array_name[0]&#125;</span></span><br></pre></td></tr></table></figure><h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•è¡Œæ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line">:&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="string">å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="string">EOF</span>ç¬¦å·å¯ä»¥æ¢æˆå…¶ä»–, æ¯”å¦‚`<span class="string">&#x27;ä¹‹ç±»çš„</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h2 id="ä¼ å‚"><a href="#ä¼ å‚" class="headerlink" title="ä¼ å‚"></a>ä¼ å‚</h2><ul><li>$0: æ–‡ä»¶å</li><li>$1: å‘½ä»¤è¡Œæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°</li><li>$2: å‘½ä»¤è¡Œæ‰§è¡Œçš„ç¬¬äºŒä¸ªå‚æ•°</li></ul><p><img src="/../img/shell-arg.png" alt="shell-arg"></p><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><h3 id="ç®—æ•°è¿ç®—ç¬¦"><a href="#ç®—æ•°è¿ç®—ç¬¦" class="headerlink" title="ç®—æ•°è¿ç®—ç¬¦"></a>ç®—æ•°è¿ç®—ç¬¦</h3><p><img src="/../img/shell-algorithm.png" alt="ç®—æ•°"></p><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><p><img src="/../img/shell-logic.png" alt="é€»è¾‘"></p><h3 id="å¸ƒå°”è¿ç®—ç¬¦"><a href="#å¸ƒå°”è¿ç®—ç¬¦" class="headerlink" title="å¸ƒå°”è¿ç®—ç¬¦"></a>å¸ƒå°”è¿ç®—ç¬¦</h3><p><img src="/../img/shell-bool.png" alt="å¸ƒå°”"></p><h3 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h3><p><img src="/../img/shell-relation.png" alt="å…³ç³»"></p><h3 id="å­—ç¬¦ä¸²è¿ç®—ç¬¦"><a href="#å­—ç¬¦ä¸²è¿ç®—ç¬¦" class="headerlink" title="å­—ç¬¦ä¸²è¿ç®—ç¬¦"></a>å­—ç¬¦ä¸²è¿ç®—ç¬¦</h3><p><img src="/../img/shell-str.png" alt="å­—ç¬¦ä¸²"></p><h3 id="æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦"><a href="#æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦" class="headerlink" title="æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦"></a>æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦</h3><p><img src="/../img/shell-file-test.png" alt="æ–‡ä»¶æµ‹è¯•"></p><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><p>å…³é”®å­—: break continue</p><h3 id="æ¡ä»¶æ§åˆ¶"><a href="#æ¡ä»¶æ§åˆ¶" class="headerlink" title="æ¡ä»¶æ§åˆ¶"></a>æ¡ä»¶æ§åˆ¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤šè¡Œ</span></span><br><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    command1</span><br><span class="line"><span class="keyword">elif</span> condition2 </span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">    command2</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å•è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> [ $(ps -ef | grep -c <span class="string">&quot;ssh&quot;</span>) -gt 1 ]; <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">&quot;true&quot;</span>; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> å€¼ <span class="keyword">in</span></span><br><span class="line">æ¨¡å¼1)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">æ¨¡å¼2ï¼‰</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h3 id="å¾ªç¯æ§åˆ¶"><a href="#å¾ªç¯æ§åˆ¶" class="headerlink" title="å¾ªç¯æ§åˆ¶"></a>å¾ªç¯æ§åˆ¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤šè¡Œ</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> item1 item2 ... itemN</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å•è¡Œ</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> item1 item2 ... itemN; <span class="keyword">do</span> command1; command2â€¦ <span class="keyword">done</span>;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¡ä»¶å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¡ä»¶å¾ªç¯</span></span><br><span class="line">until condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ— é™å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">command</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯­æ³•</span></span><br><span class="line">[ <span class="keyword">function</span> ] funname [()]</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    action;</span><br><span class="line"></span><br><span class="line">    [<span class="built_in">return</span> int;]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">demoFun</span></span>()&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª shell å‡½æ•°!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-----å‡½æ•°å¼€å§‹æ‰§è¡Œ-----&quot;</span></span><br><span class="line">demoFun</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;-----å‡½æ•°æ‰§è¡Œå®Œæ¯•-----&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºç»“æœ:</span><br><span class="line">-----å‡½æ•°å¼€å§‹æ‰§è¡Œ-----</span><br><span class="line">è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª shell å‡½æ•°!</span><br><span class="line">-----å‡½æ•°æ‰§è¡Œå®Œæ¯•-----</span><br></pre></td></tr></table></figure><h2 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h2><p><img src="/../img/shell-redirect.png" alt="shell-redirect"></p><h3 id="dev-null-æ–‡ä»¶"><a href="#dev-null-æ–‡ä»¶" class="headerlink" title="/dev/null æ–‡ä»¶"></a>/dev/null æ–‡ä»¶</h3><p>å¦‚æœå¸Œæœ›æ‰§è¡ŒæŸä¸ªå‘½ä»¤ï¼Œä½†åˆä¸å¸Œæœ›åœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¾“å‡ºç»“æœï¼Œé‚£ä¹ˆå¯ä»¥å°†è¾“å‡ºé‡å®šå‘åˆ° /dev/nullï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; /dev/null</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶å¼•ç”¨"><a href="#æ–‡ä»¶å¼•ç”¨" class="headerlink" title="æ–‡ä»¶å¼•ç”¨"></a>æ–‡ä»¶å¼•ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=<span class="string">&quot;http://muzig.github.io&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ . å·æ¥å¼•ç”¨src.sh æ–‡ä»¶</span></span><br><span class="line">. ./src.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨ä»¥ä¸‹åŒ…å«æ–‡ä»¶ä»£ç </span></span><br><span class="line"><span class="built_in">source</span> ./src.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Blogï¼š<span class="variable">$url</span>&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡º:</span><br><span class="line">Blog: http://muzig.github.io</span><br></pre></td></tr></table></figure><h2 id="oh-my-zsh-æºç "><a href="#oh-my-zsh-æºç " class="headerlink" title="oh-my-zsh æºç "></a>oh-my-zsh æºç </h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If ZSH is not defined, use the current script&#x27;s directory.</span></span><br><span class="line">[[ -z <span class="string">&quot;<span class="variable">$ZSH</span>&quot;</span> ]] &amp;&amp; <span class="built_in">export</span> ZSH=<span class="string">&quot;<span class="variable">$&#123;<span class="variable">$&#123;(%):-%x&#125;</span>:a:h&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set ZSH_CACHE_DIR to the path where cache files should be created</span></span><br><span class="line"><span class="comment"># or else we will use the default cache/</span></span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$ZSH_CACHE_DIR</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">  ZSH_CACHE_DIR=<span class="string">&quot;<span class="variable">$ZSH</span>/cache&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check for updates on initial load...</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$DISABLE_AUTO_UPDATE</span>&quot;</span> != <span class="string">&quot;true&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$ZSH</span>/tools/check_for_upgrade.sh</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Initializes Oh My Zsh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add a function path</span></span><br><span class="line">fpath=(<span class="variable">$ZSH</span>/<span class="built_in">functions</span> <span class="variable">$ZSH</span>/completions <span class="variable">$fpath</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load all stock functions (from $fpath files) called below.</span></span><br><span class="line"><span class="built_in">autoload</span> -U compaudit compinit</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set ZSH_CUSTOM to the path where your custom config files</span></span><br><span class="line"><span class="comment"># and plugins exists, or else we will use the default custom/</span></span><br><span class="line"><span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$ZSH_CUSTOM</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    ZSH_CUSTOM=<span class="string">&quot;<span class="variable">$ZSH</span>/custom&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">is_plugin</span></span>() &#123;</span><br><span class="line">  <span class="built_in">local</span> base_dir=<span class="variable">$1</span></span><br><span class="line">  <span class="built_in">local</span> name=<span class="variable">$2</span></span><br><span class="line">  <span class="built_in">builtin</span> <span class="built_in">test</span> -f <span class="variable">$base_dir</span>/plugins/<span class="variable">$name</span>/<span class="variable">$name</span>.plugin.zsh \</span><br><span class="line">    || <span class="built_in">builtin</span> <span class="built_in">test</span> -f <span class="variable">$base_dir</span>/plugins/<span class="variable">$name</span>/_<span class="variable">$name</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add all defined plugins to fpath. This must be done</span></span><br><span class="line"><span class="comment"># before running compinit.</span></span><br><span class="line"><span class="keyword">for</span> plugin (<span class="variable">$plugins</span>); <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> is_plugin <span class="variable">$ZSH_CUSTOM</span> <span class="variable">$plugin</span>; <span class="keyword">then</span></span><br><span class="line">    fpath=(<span class="variable">$ZSH_CUSTOM</span>/plugins/<span class="variable">$plugin</span> <span class="variable">$fpath</span>)</span><br><span class="line">  <span class="keyword">elif</span> is_plugin <span class="variable">$ZSH</span> <span class="variable">$plugin</span>; <span class="keyword">then</span></span><br><span class="line">    fpath=(<span class="variable">$ZSH</span>/plugins/<span class="variable">$plugin</span> <span class="variable">$fpath</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;[oh-my-zsh] plugin &#x27;<span class="variable">$plugin</span>&#x27; not found&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure out the SHORT hostname</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$OSTYPE</span>&quot;</span> = darwin* ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="comment"># macOS&#x27;s $HOST changes with dhcp, etc. Use ComputerName if possible.</span></span><br><span class="line">  SHORT_HOST=$(scutil --get ComputerName 2&gt;/dev/null) || SHORT_HOST=<span class="variable">$&#123;HOST/.*/&#125;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  SHORT_HOST=<span class="variable">$&#123;HOST/.*/&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Save the location of the current completion dump file.</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$ZSH_COMPDUMP</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  ZSH_COMPDUMP=<span class="string">&quot;<span class="variable">$&#123;ZDOTDIR:-<span class="variable">$&#123;HOME&#125;</span>&#125;</span>/.zcompdump-<span class="variable">$&#123;SHORT_HOST&#125;</span>-<span class="variable">$&#123;ZSH_VERSION&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Construct zcompdump OMZ metadata</span></span><br><span class="line">zcompdump_revision=<span class="string">&quot;#omz revision: <span class="subst">$(builtin cd -q <span class="string">&quot;<span class="variable">$ZSH</span>&quot;</span>; git rev-parse HEAD 2&gt;/dev/null)</span>&quot;</span></span><br><span class="line">zcompdump_fpath=<span class="string">&quot;#omz fpath: <span class="variable">$fpath</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete the zcompdump file if OMZ zcompdump metadata changed</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">command</span> grep -q -Fx <span class="string">&quot;<span class="variable">$zcompdump_revision</span>&quot;</span> <span class="string">&quot;<span class="variable">$ZSH_COMPDUMP</span>&quot;</span> 2&gt;/dev/null \</span><br><span class="line">   || ! <span class="built_in">command</span> grep -q -Fx <span class="string">&quot;<span class="variable">$zcompdump_fpath</span>&quot;</span> <span class="string">&quot;<span class="variable">$ZSH_COMPDUMP</span>&quot;</span> 2&gt;/dev/null; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">command</span> rm -f <span class="string">&quot;<span class="variable">$ZSH_COMPDUMP</span>&quot;</span></span><br><span class="line">  zcompdump_refresh=1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$ZSH_DISABLE_COMPFIX</span> != <span class="literal">true</span> ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$ZSH</span>/lib/compfix.zsh</span><br><span class="line">  <span class="comment"># If completion insecurities exist, warn the user</span></span><br><span class="line">  handle_completion_insecurities</span><br><span class="line">  <span class="comment"># Load only from secure directories</span></span><br><span class="line">  compinit -i -C -d <span class="string">&quot;<span class="variable">$&#123;ZSH_COMPDUMP&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="comment"># If the user wants it, load from all found directories</span></span><br><span class="line">  compinit -u -C -d <span class="string">&quot;<span class="variable">$&#123;ZSH_COMPDUMP&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Append zcompdump metadata if missing</span></span><br><span class="line"><span class="keyword">if</span> (( <span class="variable">$zcompdump_refresh</span> )); <span class="keyword">then</span></span><br><span class="line">  <span class="comment"># Use `tee` in case the $ZSH_COMPDUMP filename is invalid, to silence the error</span></span><br><span class="line">  <span class="comment"># See https://github.com/ohmyzsh/ohmyzsh/commit/dd1a7269#commitcomment-39003489</span></span><br><span class="line">  tee -a <span class="string">&quot;<span class="variable">$ZSH_COMPDUMP</span>&quot;</span> &amp;&gt;/dev/null &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$zcompdump_revision</span></span><br><span class="line"><span class="string">$zcompdump_fpath</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">unset</span> zcompdump_revision zcompdump_fpath zcompdump_refresh</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load all of the config files in ~/oh-my-zsh that end in .zsh</span></span><br><span class="line"><span class="comment"># TIP: Add files you don&#x27;t want in git to .gitignore</span></span><br><span class="line"><span class="keyword">for</span> config_file (<span class="variable">$ZSH</span>/lib/*.zsh); <span class="keyword">do</span></span><br><span class="line">  custom_config_file=<span class="string">&quot;<span class="variable">$&#123;ZSH_CUSTOM&#125;</span>/lib/<span class="variable">$&#123;config_file:t&#125;</span>&quot;</span></span><br><span class="line">  [ -f <span class="string">&quot;<span class="variable">$&#123;custom_config_file&#125;</span>&quot;</span> ] &amp;&amp; config_file=<span class="variable">$&#123;custom_config_file&#125;</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$config_file</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load all of the plugins that were defined in ~/.zshrc</span></span><br><span class="line"><span class="keyword">for</span> plugin (<span class="variable">$plugins</span>); <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">if</span> [ -f <span class="variable">$ZSH_CUSTOM</span>/plugins/<span class="variable">$plugin</span>/<span class="variable">$plugin</span>.plugin.zsh ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> <span class="variable">$ZSH_CUSTOM</span>/plugins/<span class="variable">$plugin</span>/<span class="variable">$plugin</span>.plugin.zsh</span><br><span class="line">  <span class="keyword">elif</span> [ -f <span class="variable">$ZSH</span>/plugins/<span class="variable">$plugin</span>/<span class="variable">$plugin</span>.plugin.zsh ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> <span class="variable">$ZSH</span>/plugins/<span class="variable">$plugin</span>/<span class="variable">$plugin</span>.plugin.zsh</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load all of your custom configurations from custom/</span></span><br><span class="line"><span class="keyword">for</span> config_file (<span class="variable">$ZSH_CUSTOM</span>/*.zsh(N)); <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$config_file</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">unset</span> config_file</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load the theme</span></span><br><span class="line"><span class="keyword">if</span> [ ! <span class="string">&quot;<span class="variable">$ZSH_THEME</span>&quot;</span> = <span class="string">&quot;&quot;</span>  ]; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$ZSH_CUSTOM</span>/<span class="variable">$ZSH_THEME</span>.zsh-theme&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> <span class="string">&quot;<span class="variable">$ZSH_CUSTOM</span>/<span class="variable">$ZSH_THEME</span>.zsh-theme&quot;</span></span><br><span class="line">  <span class="keyword">elif</span> [ -f <span class="string">&quot;<span class="variable">$ZSH_CUSTOM</span>/themes/<span class="variable">$ZSH_THEME</span>.zsh-theme&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">source</span> <span class="string">&quot;<span class="variable">$ZSH_CUSTOM</span>/themes/<span class="variable">$ZSH_THEME</span>.zsh-theme&quot;</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">source</span> <span class="string">&quot;<span class="variable">$ZSH</span>/themes/<span class="variable">$ZSH_THEME</span>.zsh-theme&quot;</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://github.com/wangdoc/bash-tutorial">é˜®ä¸€å³°çš„ã€ŠBash è„šæœ¬æ•™ç¨‹ã€‹</a></li><li><a href="https://www.runoob.com/linux/linux-shell.html">Shell æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨é¡¹ç›®ä¸­å¼€å‘è¿‡ç¨‹ä¸­, éš¾å…ä¼šå¤„ç†ä¸€äº›è„šæœ¬åŒ–çš„ä¸šåŠ¡, ç¼–å†™ shell è„šæœ¬èƒ½å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„å¤„ç†ä¸€äº›å›ºå®šä¸šåŠ¡.&lt;/p&gt;
&lt;p&gt;ç§‘æŠ€æ”¹å˜ç”Ÿæ´», è„šæœ¬é‡Šæ”¾åŒæ‰‹.&lt;/p&gt;</summary>
    
    
    
    <category term="è„šæœ¬" scheme="http://muzig.github.io/categories/%E8%84%9A%E6%9C%AC/"/>
    
    
    <category term="shell" scheme="http://muzig.github.io/tags/shell/"/>
    
    <category term="note" scheme="http://muzig.github.io/tags/note/"/>
    
  </entry>
  
  <entry>
    <title>Goland ç ´è§£æ•™ç¨‹</title>
    <link href="http://muzig.github.io/2020/12/05/goland-cracking/"/>
    <id>http://muzig.github.io/2020/12/05/goland-cracking/</id>
    <published>2020-12-05T12:58:28.000Z</published>
    <updated>2021-04-11T13:50:29.177Z</updated>
    
    <content type="html"><![CDATA[<p>ç ´è§£æ–¹å¼: å¾ªç¯é‡ç½®è¯•ç”¨æ—¶é—´.</p><a id="more"></a><ul><li><a href="#%E6%95%99%E7%A8%8B">æ•™ç¨‹</a></li><li><a href="#%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5">å‹æƒ…é“¾æ¥</a></li></ul><h2 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h2><p>æ­¥éª¤:</p><ol><li>æ‰“å¼€ goland, é€‰æ‹©è¯•ç”¨, è¿›å…¥IDEç•Œé¢</li><li>Menu - Goland - Perference - Plugins</li><li>ç‚¹å‡»åƒé½¿è½®çš„å›¾æ ‡(å¦‚ä¸‹å›¾)</li><li>Manager Plugin Repos</li><li>æ·»åŠ æ­¤é“¾æ¥: <code>https://plugins.zhile.io</code>, ç­‰å¾…åˆ·æ–°å®Œæˆ</li><li>æœç´¢æ’ä»¶ <code>IDE Eval reset</code>, æ’ä»¶æè¿°æœ‰è¯´æ˜å’Œä½¿ç”¨æ–¹æ³•</li><li>ä¸‹è½½å®‰è£…é‡å¯ IDE</li></ol><p><img src="/../img/Snipaste_2020-12-05_13-03-28.png" alt="é½¿è½®"></p><h2 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h2><ul><li><a href="https://zhile.io/">ç ´è§£å¤§ä½¬åšå®¢</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç ´è§£æ–¹å¼: å¾ªç¯é‡ç½®è¯•ç”¨æ—¶é—´.&lt;/p&gt;</summary>
    
    
    
    <category term="å·¥å…·" scheme="http://muzig.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="crack" scheme="http://muzig.github.io/tags/crack/"/>
    
    <category term="goland" scheme="http://muzig.github.io/tags/goland/"/>
    
  </entry>
  
</feed>
